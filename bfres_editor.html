<!DOCTYPE html>
<html>
    <head>
        <!--
            @copyright 2018 - Max Bebök
            @author Max Bebök
            @license GNU-GPLv3 - see the "LICENSE" file in the root directory
        -->

        <title>BFRES Editor</title>

        <link rel="stylesheet" href="css/photon.dark.css">
        <link rel="stylesheet" href="css/theme.dark.css">
        <link rel="stylesheet" href="css/split.css">
        <link rel="stylesheet" href="css/style.css">

        <!-- THREE.JS stuff - some of these files are not compatible with require() thats why there included here -->
        <script>
            var THREE = require.main.require("./lib/threejs/three.min.js");
        </script>

        <script src="./lib/threejs/lib/shaders/CopyShader.js"></script>

        <script src="./lib/threejs/lib/postprocessing/EffectComposer.js"></script>
        <script src="./lib/threejs/lib/postprocessing/RenderPass.js"></script>
        <script src="./lib/threejs/lib/postprocessing/ShaderPass.js"></script>
        <script src="./lib/threejs/lib/postprocessing/MaskPass.js"></script>

        <script src="./lib/threejs/lib/postprocessing/SAOPass.js"></script>
        <script src="./lib/threejs/lib/shaders/SAOShader.js"></script>
        <script src="./lib/threejs/lib/shaders/DepthLimitedBlurShader.js"></script>
        <script src="./lib/threejs/lib/shaders/UnpackDepthRGBAShader.js"></script>

        <!--script src="./lib/threejs/lib/libs/stats.min.js"></script-->
        <!--script src='./lib/threejs/lib/libs/dat.gui.min.js'></script-->

    </head>
    <body>

        <div class="window">

        <header class="toolbar toolbar-header">

          <div class="toolbar-actions">
            <div class="btn-group">
              <button onclick="mainApp.openFile();" class="btn btn-default" title="Open BFRES File">
                <span class="icon icon-folder"></span>
              </button>
              <button onclick="mainApp.clear();" class="btn btn-default" title="Close File">
                <span class="icon icon-cancel"></span>
              </button>
            </div>

            <div class="btn-group" style="position: absolute; right: 0px;">
              <button class="btn btn-default" onclick="mainApp.toggleFullscreen()" title="Fullscreen">
                <span class="icon icon-popup"></span>
              </button>
              <button class="btn btn-default" onclick="mainApp.exit()" title="Exit">
                <span class="icon icon-cancel-squared"></span>
              </button>
            </div>

          </div>
        </header>


        <div class="window-content" id="bfres_tab_1">
            <div class="pane-group">

                <div class="pane-sm sidebar" id="main-sidebar-left" style="max-width: 250px;">

                    <h5 class="nav-group-title">BFRES - Header</h5>

                    <table class="table">
                        <tbody>
                            <tr>
                                <td>Name</td>
                                <td class="data-header-fileName">-</td>
                            </tr>
                            <tr>
                                <td>Version</td>
                                <td class="data-header-version">-</td>
                            </tr>
                        </tbody>
                    </table>


                    <h5 class="nav-group-title">Files</h5>
                    <ul id="tab_tabContainer_bfres" class="list-group">
                        <li class="list-group-header">
                            <input class="form-control" type="text" placeholder="Search files">
                        </li>
                    </ul>
                </div>

                <div class="pane" id="main-sidebar-right">
                    <div id="tab_contentContainer_bfres">
                    </div>
                </div>
            </div>
        </div>

          <footer id="footer" class="toolbar toolbar-footer">
            <h1 class="title data-fileName">
                <!--
                @TODO MOVE TO CREDITS
                <div>Icons made by <a href="https://www.flaticon.com/authors/smashicons" title="Smashicons">Smashicons</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></div>
                <div>Icons made by <a href="https://www.flaticon.com/authors/roundicons-freebies" title="Roundicons Freebies">Roundicons Freebies</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></div>
                <div>Icons made by <a href="http://www.freepik.com" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></div>
            -->
            </h1>
          </footer>

        </div>

        <script>
            const electron = require('electron');
            let mainWindow = null;
            var mainApp = null;

            document.addEventListener('DOMContentLoaded', ()=>
            {
                let windows = electron.remote.BrowserWindow.getAllWindows();
                for(let win of windows)
                {
                    if(win.name == "main-window")
                        mainWindow = win;
                }

                let args = electron.remote.process.argv;

                let App = require("./bfres_editor.js");
                mainApp = new App(mainWindow, args);

                mainApp.run();
            },
            false);
        </script>
    </body>
</html>
